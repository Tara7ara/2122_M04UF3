<!doctype html>
<html>
<head><title>Cruzando la Calle Simulator</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
</head>
<body>
<h1>Te falta calle</h1>

<script>
let game_w = 800;
let game_h = 600;

let config = {
	width: game_w,
	height: game_h,
	scene: {
		preload: preload,	
		create: create,
		update: update

	}
}
let game = new Phaser.Game(config);

let car1_img;
let car2_img;
let car3_img;
let car4_img;

let car4_spawn = 800;

let offset_x = -128;

let car1_speed = 3;
let car2_speed = 2;
let car3_speed = 4;
let car4_speed = 1;

function preload ()
{
    this.load.image('character','zombie.png');

	//mapa
	this.load.image('calle','calle.png');
	//coche que son mas 3D
    this.load.image('transport','transport.png');
    this.load.image('trucktank','trucktank.png');
    this.load.image('formula','formula.png');
    this.load.image('suv_green','suv_green.png');
	//coches que quiero usar	
    this.load.image('car1','car_black_1.png');
    this.load.image('car2','car_blue_2.png');
    this.load.image('car3','car_red_2.png');
    this.load.image('car4','car_yellow_4.png');
	}

function create(){
	graphics = this.add.graphics();
	image = this.add.image(game_w/2, game_h/2, 'calle');
	character_img = this.add.image(game_w/2, 40, 'character');

	car1_img = this.add.image(offset_x, 530, 'car1');
	car2_img = this.add.image(car4_spawn, 380, 'car2');
	car3_img = this.add.image(offset_x, 200, 'car3');
	car4_img = this.add.image(car4_spawn, 310, 'car4');

	car2_img.flipX = true;
	car4_img.flipX = true;
}

function update(){
//para girar la img
//character_img.rotation += 0.01;

car1_img.x += car1_speed;
car2_img.x -= car3_speed;
car3_img.x += car3_speed;
car4_img.x -= car4_speed;

flipcar(car1_img);
flipcar(car2_img);
flipcar(car3_img);
flipcar(car4_img);
}

function flipcar (car){
	if (car.flipX && car.x < offset_x)
		car.x = game_w - offset_x;
	else if (!car.flipX && car.x > game_w - offset_x)
		car.x = offset_x;	
}
</script>
</body>
</html>
